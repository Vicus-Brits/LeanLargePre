<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gantt Chart with Week Legend</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .gantt-container {
        width: 100%;
        max-width: 800px;
        border: 1px solid #ddd;
        padding: 10px;
        position: relative;
      }
      .gantt-legend {
        display: flex;
        width: 100%;
        border-bottom: 2px solid #ddd;
        padding-bottom: 5px;
      }
      .gantt-week {
        flex: 1;
        text-align: center;
        font-size: 12px;
        font-weight: bold;
      }
      .gantt-row {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }
      .gantt-label {
        width: 100px;
        text-align: right;
        margin-right: 10px;
        font-weight: bold;
      }
      .gantt-bar-container {
        flex-grow: 1;
        position: relative;
        height: 30px;
        background: #f0f0f0;
        display: flex;
        align-items: center;
      }
      .gantt-bar {
        position: absolute;
        height: 100%;
        background-color: #4caf50;
        color: white;
        text-align: center;
        line-height: 30px;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <h2>Gantt Chart</h2>
    <div class="gantt-container">
      <div class="gantt-legend" id="ganttLegend"></div>
      <div id="ganttChart"></div>
    </div>

    <script>
      // Sample data for the Gantt chart
      const data = [
        { Project: "Item 1", StartWeek: 15, EndWeek: 20 },
        { Project: "Item 2", StartWeek: 17, EndWeek: 34 },
        { Project: "Item 3", StartWeek: 12, EndWeek: 18 },
        { Project: "Item 4", StartWeek: 25, EndWeek: 36 },
        { Project: "Item 5", StartWeek: 25, EndWeek: 33 },
      ];

      // Calculate the minimum and maximum weeks from the data
      const minWeek = Math.min(...data.map((item) => item.StartWeek));
      const maxWeek = Math.max(...data.map((item) => item.EndWeek));
      const totalWeeks = maxWeek - minWeek + 1;

      // Function to render the Gantt chart
      function renderGanttChart() {
        const ganttChart = document.getElementById("ganttChart");
        ganttChart.innerHTML = ""; // Clear previous content

        // Iterate over each item in the data to create rows
        data.forEach((item) => {
          const row = document.createElement("div");
          row.classList.add("gantt-row");

          const label = document.createElement("div");
          label.classList.add("gantt-label");
          label.textContent = item.Project;

          const barContainer = document.createElement("div");
          barContainer.classList.add("gantt-bar-container");

          const bar = document.createElement("div");
          bar.classList.add("gantt-bar");

          // Calculate position and width of the bar
          const startOffset = ((item.StartWeek - minWeek) / totalWeeks) * 100;
          const duration =
            ((item.EndWeek - item.StartWeek + 1) / totalWeeks) * 100;

          bar.style.left = startOffset + "%";
          bar.style.width = duration + "%";
          bar.textContent = `${item.StartWeek} - ${item.EndWeek}`;

          // Append the bar to the bar container and the row
          barContainer.appendChild(bar);
          row.appendChild(label);
          row.appendChild(barContainer);
          ganttChart.appendChild(row);
        });

        // Render the legend after rendering the Gantt chart
        renderLegend();
      }

      // Function to render the week legend
      function renderLegend() {
        const legend = document.getElementById("ganttLegend");
        legend.innerHTML = ""; // Clear previous content
        legend.style.display = "flex";

        // Iterate over each week to create legend items
        for (let week = minWeek; week <= maxWeek; week++) {
          const weekElement = document.createElement("div");
          weekElement.classList.add("gantt-week");
          weekElement.textContent = week;
          weekElement.style.flex = `1 1 ${100 / totalWeeks}%`;
          legend.appendChild(weekElement);
        }
      }

      // Initial rendering of the Gantt chart
      renderGanttChart();
    </script>
  </body>
</html>
